<!DOCTYPE html>
<head>
  <style>
    body {
      background:black;
      color: #66fc03;
      font-family: 'HelveticaNeue-Medium';
    }
  </style>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="/images/briefcase.png">
  <title>Relógio de Folga</title>
</head>
<body>
  <div align="center">
    <canvas id="myChart" width="400" height="400"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  
  <script>
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['06:00', '07:00', '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00'],
        datasets: [{
          data: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          backgroundColor: ['#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff'],
        }]
      },
      options: {
        responsive: false,
        legend: {
          display: false
        }
      }
    });

    var startWorkHour = 6;
    var endWorkHour = 18;
    var intervalDuration = 36; // horas do intervalo de folga

    function isDayB(currentDate) {
      // Definir o início e o fim do dia A (18h) e do dia B (6h)
      var startDayA = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate(), endWorkHour, 0, 0);
      var startDayB = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate(), startWorkHour, 0, 0);

      return currentDate >= startDayB && currentDate < startDayA;
    }

    function updateChart() {
      var currentTime = new Date();
      var currentDate = new Date(currentTime.getFullYear(), currentTime.getMonth(), currentTime.getDate(), currentTime.getHours(), 0, 0); // Zerar os minutos e segundos

      var isB = isDayB(currentDate);

      var elapsedTime = 0;
      if (isB) {
        elapsedTime = (currentDate - new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate(), startWorkHour, 0, 0)) / 3600000;
      } else {
        elapsedTime = intervalDuration + (currentDate - new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate(), endWorkHour, 0, 0)) / 3600000;
      }

      elapsedTime %= intervalDuration;

      for (var i = 0; i < elapsedTime; i++) {
        myChart.data.datasets[0].data[i] = 0;
        myChart.data.datasets[0].backgroundColor[i] = '#8c8c8c';
      }

      for (var i = elapsedTime; i < intervalDuration; i++) {
        myChart.data.datasets[0].data[i] = 1;
        myChart.data.datasets[0].backgroundColor[i] = '#00f7ff';
      }

      myChart.update();
    }

    // Chamada inicial
    updateChart();

    // Atualizar a cada hora
    setInterval(updateChart, 3600000);
  </script>
  
</body>
</html>
