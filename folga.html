<!DOCTYPE html>
<head>
  <style>
    body {
      background:black;
      color: #66fc03;
      font-family: 'HelveticaNeue-Medium';
    }
  </style>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="/images/briefcase.png">
  <title>Relógio de Folga</title>
</head>
<body>
  <div align="center">
    <canvas id="myChart" width="400" height="400"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  
  <script>
    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
      type: 'pie',
      data: {
    labels: ['06:00', '07:00', '08:00', '09:00', '10:00', '11:00','12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00', '23:00','00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00', '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00'],
    datasets: [{
      data: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
      backgroundColor: ['#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#00f7ff', '#faffad', '#faffad', '#faffad', '#ffc400', '#ff9100']
    }]
  },
      options: {
        responsive: false,
        legend: {
          display: false
        }
      }
    });

    var startWorkHour = 6;
    var endWorkHour = 18;
    var intervalDuration = 36; // horas do intervalo de folga

    function isDayB(currentDate) {
      // Definir o início e o fim do dia A (18h) e do dia B (6h)
      var startDayA = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate(), endWorkHour, 0, 0);
      var startDayB = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate(), startWorkHour, 0, 0);

      return currentDate >= startDayB && currentDate < startDayA;
    }

    function updateChart() {
      var currentTime = new Date();
      var currentDate = new Date(currentTime.getFullYear(), currentTime.getMonth(), currentTime.getDate(), currentTime.getHours(), 0, 0); // Zerar os minutos e segundos

      var elapsedTime = 0;

      if (currentDate >= new Date('2023-07-21T06:00:00')) { // Verifica se a data atual é após o ponto de partida
        var daysSinceStart = Math.floor((currentDate - new Date('2023-07-21T06:00:00')) / (24 * 60 * 60 * 1000)); // Número de dias que se passaram desde o ponto de partida
        elapsedTime = daysSinceStart * intervalDuration; // Calcula o tempo total em horas desde o ponto de partida
        elapsedTime += currentDate.getHours() - startWorkHour; // Adiciona o tempo parcial do dia atual (dia B)
      }

      elapsedTime %= intervalDuration;

      var chartData = [];
      var chartColors = [];

      for (var i = 0; i < intervalDuration; i++) {
        if (i < elapsedTime) {
          chartData.push(0);
          chartColors.push('#8c8c8c');
        } else {
          chartData.push(1);
          chartColors.push('#00f7ff');
        }
      }

      myChart.data.labels = ['06:00', '07:00', '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00'];
      myChart.data.datasets[0].data = chartData;
      myChart.data.datasets[0].backgroundColor = chartColors;
      myChart.update();
    }

    // Chamada inicial
    updateChart();

    // Atualizar a cada hora
    setInterval(updateChart, 3600000);
  </script>
  
</body>
</html>
